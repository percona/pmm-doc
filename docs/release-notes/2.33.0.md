# Percona Monitoring and Management 2.33.0

| **Release date:** | Dec 13, 2022                                                                                    |
| ----------------- | ----------------------------------------------------------------------------------------------- |
| **Installation:** | [Installing Percona Monitoring and Management](https://www.percona.com/software/pmm/quickstart) |

Percona Monitoring and Management (PMM) is an open source database monitoring, management, and observability solution for MySQL, PostgreSQL, and MongoDB.

!!! caution alert alert-warning "Important"
    We recommend using the latest version of PMM. This ensures that you have access to the latest PMM features and that your environment runs on the latest version of the underlying components, such as VictoriaMetrics, with all the bug fixes in place.

## Release Highlights


### High Availability in PMM


We are excited to share our roadmap for High Availability (HA) in PMM, a new solution that our users have been anticipating. HA will provide your PMM near-zero downtime and wil ensure monitoring without data loss during a failover.


To ensure a smooth rollout, HA in PMM will be introduced in phases, in line with your requirements and feedback, with PMM 2.33.0 being the starting point. 

!!! caution alert alert-warning "Important"
    PMM HA will be rolled out in three stages. Stage one is included with PMM 2.33.0 and stages two and three will be rolled out next year.

The following features/use cases will be covered as part of the various stages of HA in PMM:


|**Stages of HA in PMM**              | **Solutions Provided**          |
|-------------------------------------|---------------------------------|
|**Stage one**           |As an initial step towards preventing data loss we have developed the following:<br><br>**Prevent data loss with VM integration for short outages**<br>If PMM Server goes down, metrics will be buffered on the monitored instance until PMM Server comes back online, which is when metrics will get pushed to PMM Server. Note that this only applies to PMM Clients which run in the so-called `push` mode. The same holds true when a brief network outage occurs on the client side.|
|**Stage two**           |As part of PMM HA stage two in HA we plan to implement the following:<br><br>**HA data sources**<br>As part of stage two we will let the users use external data sources therby decreasing dependency on the file system.
|**Stage three**         |As part of PMM HA stage three we plan to implement the following:<br><br>**Clusterized HA**<br>Clustered PMM will be the focus of stage three. Detailed information will be included in the upcoming release notes.






### Guided tour of Percona Alerting


Following the recent improvements to PMM Alerting, we have added a short tutorial to help you explore our streamlined alerting system based on Grafana.
The in-app tutorial automatically pops up when you first open the **Alerting** page to help you uncover the fundamentals of Percona Alerting.


 
### Restore MongoDB backups easier

Building on the significant improvements for MongoDB Backup Management introduced in the previous release. We are now simplifying the process for restoring physical MongoDB backups.
Starting with this release, you can restore physical backups straight from the UI and PMM will handle the process end-to-end. Prior to this, you would require to perform additional manual steps to restart your MongoDB database service so that your applications could make use of the restored data.

### Components Upgrade

- VictoriaMetrics has been upgraded from 1.77.1 to 1.82.1.
- As part of PMM 2.33.0, grafana has been updated to 9.2.5, which fixes some critical vulnerabilities. For more information, see [grafana 9.2.5](https://grafana.com/blog/2022/11/08/security-release-new-versions-of-grafana-with-critical-and-moderate-fixes-for-cve-2022-39328-cve-2022-39307-and-cve-2022-39306/)



## New Features

- [PMM-10889](https://jira.percona.com/browse/PMM-10889) - Starting with PMM2.33.0, while using the pmm-admin CLI command, you do not have to know the entire command. Just type the initial command and press Tab. The rest of the command will be autocompleted.

    Depending on the shell you are using, add the following to your shells .rc file for autocomplete to work:

    ```sh
    source <(pmm-admin completion -c <your shell>)
    E.g. source <(pmm-admin completion -c bash)
    ```

- [PMM-10955](https://jira.percona.com/browse/PMM-10955) - Timestamps for point-in-time recovery (PITR) restore. 

    After restoring a PITR backup, you can now check the time when you started the restore and the time when the restore was finalized. This information is available in the new **Started at** and **Finished at** columns under **Backup > Restores**. 




## Improvements

- [PMM-7000](https://jira.percona.com/browse/PMM-7000): [HA]: Staring with PMM 2.33.0, if the PMM Server goes down, metrics will be buffered on the monitored instance until PMM Server goes back online, which is when metrics will get pushed to the PMM Server. 


- [PMM-10901](https://jira.percona.com/browse/PMM-10901): [Documentation]: To enable the users to use High Availability easily, we have added exclusive documentation for HA.

- [PMM-8516](https://jira.percona.com/browse/PMM-8516): [Backup Management]:  When creating an a backup, the Vendor field was not automatically populated in the Back-up on demand dialog. This issue is now fixed. 

- [PMM-10627](https://jira.percona.com/browse/PMM-10627): [DBaaS]: You can now create a single node cluster for PSMDB. 
 
 - [PMM-10855](https://jira.percona.com/browse/PMM-10855): Avoid massive gRPC messages formatting for disabled log level


- [PMM-10903](https://jira.percona.com/browse/PMM-10903): [DBaaS]: To simplify DBaas, you no longer have to manually enter the Public Address on the **PMM Settings > Advanced Settings** page. With DBaaS enabled, PMM will automatically detect and populate the **Public Address**.


- [PMM-11085](https://jira.percona.com/browse/PMM-11085): [Dashboard]: Backup inventory - hide "create backup" action until better definition.


- [PMM-10881](https://jira.percona.com/browse/PMM-10881): [CVE]: As part of PMM 2.33.0, grafana was updated to 9.2.5, which fixes some critical vulnerabilities. For more information, see [grafana 9.2.5](https://grafana.com/blog/2022/11/08/security-release-new-versions-of-grafana-with-critical-and-moderate-fixes-for-cve-2022-39328-cve-2022-39307-and-cve-2022-39306/).



- [PMM-10135](https://jira.percona.com/browse/PMM-10135): Due to its limited use, the **Examples** tab has been disabled in PMM 2.33.0. Also, to safeguard our user's privacy, we have removed Personally Identifiable Information (PII) from the **Explain** tab.


- [PMM-8655](https://jira.percona.com/browse/PMM-8655): Latest state of agents is now available on the PMM server after the connection is re-established between the client and server.

- [PMM-10969](https://jira.percona.com/browse/PMM-10969): Victoria Metris operator has been upgraded from 0.24 to 0.29.0.


- [PMM-10554](https://jira.percona.com/browse/PMM-10554): Postgres collector now provides runtime duration for scrapes at the collector level. As a result, we can identify collectors who take too long. By utilizing this data, corrective action can be taken.



- [PMM-10629](https://jira.percona.com/browse/PMM-10629): [Components Upgrade]: VictoriaMetrics has been upgraded from 1.77.1 to 1.82.1.




## Bugs Fixed


- [PMM-10683](https://jira.percona.com/browse/PMM-10683): [DBaaS]: While registering a K8s cluster on the **Manage Components Versions** modal, the versions were not getting unchecked. The issue has now been resolved.


- [PMM-10637](https://jira.percona.com/browse/PMM-10637): Fixed an issue where the queries for some panels on the PostgreSQL Instance Summary dashboards were broken.


- [PMM-10732](https://jira.percona.com/browse/PMM-10732): Checking the select all checkbox on the **Services**, **Agents**, and **Nodes** modal in the **PMM Inventory** window deleted all entries on all the pages. The issue has been resolved now.


- [PMM-10983](https://jira.percona.com/browse/PMM-10983): Some panels on the dashboards were showing only short names. The issue has been resolved now.


- [PMM-10996](https://jira.percona.com/browse/PMM-10996): [Backup Management]: Fixed an issue where the initial description text for a storage location could not be updated.

- [PMM-11029](https://jira.percona.com/browse/PMM-11029): There was typo on the Home dashboard: **COMMAND CENTER** graphs. This has been fixed now.


- [PMM-11042](https://jira.percona.com/browse/PMM-11042): Incorrect 'than' 'then' in the error message



## Known Issues



