# Percona Monitoring and Management 2.29.0

| **Release date:** | July 17, 2022                                                                                    |
| ----------------- | ----------------------------------------------------------------------------------------------- |
| **Installation:** | [Installing Percona Monitoring and Management](https://www.percona.com/software/pmm/quickstart) |

Percona Monitoring and Management (PMM) is an open source database monitoring, management, and observability solution for MySQL, PostgreSQL and MongoDB.

!!! caution alert alert-warning "Important"
    We recommend using the latest version of PMM. This ensures that you have access to the latest PMM features and that your environment runs on the latest version of the underlying components, such as VictoriaMetrics, with all the bug fixes in place.

## Release Highlights

### New user onboarding

PMM now includes a short in-app tutorial that automatically pops up when you first launch the application. 
If you are a new user, this is your virtual unboxing of key PMM features to help you get started easier. 
If you are an Intermediate or Advanced user, use the tour as a checklist of features worth exploring to make sure you’re making the most out of your PMM. 


### Extended ways of depoying PMM in various environments**

- PMM in k8s: [Technical Preview]: With PMM 2.29.0 scale and deploy your PMM instances faster using the Kubernetes clusters. 
- Podman support: [Technical Preview]: Starting PMM 2.29.0, deploy your PMM instances more securely using Podman as it does not require root access. Also, obtain more control over the layers of the container with Podman.
- Start PMM without Data container: It's now simpler to start PMM without a data container using your file system. You can access your files directly from your local file system.
- RHEL 9 support (client): “New version of RHEL released and we following our policy to provide packages to the latest  supported OS”

### Monitoring

- Meta metrics: Additional metrics for Mongodb exporters to monitor the time it takes to collect data from different collectors. This allows you to identify the monitoring costs for various collectors by MongoDB exporters.
- PXC Cluster Dashboard: [Experimental]: Restructured the PXC cluster Dashboard to make it intuitive and user-friendly. Important data for the PXC cluster is put together in this dashboard to obtain feedback from our users.


### Troubleshooting and operations improvement

- Logs verbosity management: Pronounced control over the logs you want to view with the flexibility to choose options such as warning, error, and fatal with the --log-level parameter.
- More details and targets in commands 
- Ppof data collection: Obtain profiling data from the PMM server with the pprof parameter in the pmm-admin summary enabling you to generate reports in textual and graphical formats for visualizing and analyzing data.


### Percona Platform

### Advisors

### DBaaS

Simplified the API such that it requires fewer parameters to run the API. Also, enhanced the documentation.

### Exporters

Updated the MySQL exporter.

### Components upgrade

 - Upgraded VictoriaMetrics operatot to version 0.24.
 - Upgraded the ClickHouse plugin to 2.4.4 which fixes some of the CVEs.
 - Added RHEL 9 support for PMM client.
 - With this release, we are upgrading grpc-gateway to version 2.0, which deprecates the error field in error responses. If you are using the PMM API, make sure to replace this with the new message field from the Google Cloud API Error model. 



### Important bug fixes

- [PMM-9981](https://jira.percona.com/browse/PMM-9981): 
- [PMM-9510](https://jira.percona.com/browse/PMM-9510): Fixed incorrect and duplicate information displayed on the Dashboard for MongoDB Replica Set.


## New Features

- [PMM-10133](https://jira.percona.com/browse/PMM-10133): New User Onboarding: For an enhanced user experience and explicitly keeping the new user's requirements in mind, added a guided user onboarding tour that guides you over the main PMM components on your first onboarding journey.

- [PMM-10059](https://jira.percona.com/browse/PMM-10059): Advisors: Use filters to explore available advisors checks. As we’re constantly adding more advisors for checking the health of your connected databases, you may find it useful to now be able to drill down through this constantly growing list.              
Use the filters on the Advisors Checks > All Checks page to search advisors by Name, Description, Status or Interval. If you need to share the filtered results with your team members, send them the PMM URL which saves your search criteria and results. 

- [PMM-7110](https://jira.percona.com/browse/PMM-7110) - You can now obtain profiling data with the pprof tool that helps analyze CPU, Memory usage, heap size, and thread count for your PMM components.

- [PMM-8660](https://jira.percona.com/browse/PMM-8660): Easier access to your Percona Support Specialist - If you are a Percona customer, you can now find the contact details of your dedicated Percona Support Specialist on the new Environment Overview tab on the main menu. 
The Percona Contacts section here shows the name and email of the Customer Success Manager assigned to your organization, who can help with any PMM queries. The new  Environment Overview tab will soon be populated with more useful information about your PMM environment.

- [PMM-7925](https://jira.percona.com/browse/PMM-7925): [Technical Preview]: Starting PMM 2.29.0, you can now deploy your PMM instances using Podman, which is considered far more secure as it does not require root access. Also, with Podman, you can exercise control over the layers of the container.

- [PMM-9613](https://jira.percona.com/browse/PMM-9613): [Technical Preview]: You can now scale and deploy your PMM instances faster using the Kubernetes clusters. 

- [PMM-9919](https://jira.percona.com/browse/PMM-9919): We have now added some additional metrics to Mongodb exporters to monitor the time it takes to collect data for different collectors that would allow us to identify the monitoring cost of various collectors by MongoDB exporters.
 


## Improvements

- [PMM-9766](https://jira.percona.com/browse/PMM-9766): Advisors: Display checks filtered by category
- [PMM-8455](https://jira.percona.com/browse/PMM-8455): Advisors: Incomplete severity levels levels and inconsistency between front and back end of application for advisors (Security)
- [PMM-7491](https://jira.percona.com/browse/PMM-7491): Alerting: We’ve redefined the Filters option under Integrated Alerting > Alert Rules > New Rule to simplify the way you target specific services or nodes for your alert rules. Instead of typing an exact filter pattern, you can now intuitivelyintuitivelyintuitvely create a filter by choosing from the available operators and filling in the predefined fields. So instead of typing: service_name=name123, just fill in the following fields:
- [PMM-9611](https://jira.percona.com/browse/PMM-9611): PMM now warns you if your current domain is different than the one specified in the Grafana .INI configuration file. Since this can generate incorrect short URLs when sharing the link to a PMM dashboard, make sure to correct this mismatch if you see a warning on the Share Panel > Link page. 
- [PMM-7326](https://jira.percona.com/browse/PMM-7326): You now have more control over the logs you want to view with the --log-level parameter. With this enhancement, you can experience more pronounced logging with the flexibility to choose options such as warning, error, and fatal.
- [PMM-8566](https://jira.percona.com/browse/PMM-8566): For enhanced security, you can now specify the custom Basic Auth password for agents when adding Node
- [PMM-9362](https://jira.percona.com/browse/PMM-9362): PMM Admins can now disconnect servers from Percona Platform even if they are not logged in with a Percona Account Percona Account. 
- [PMM-9613](https://jira.percona.com/browse/PMM-9613): Technical Preview: You can seamlessly deploy PMM with a rootful image on the Kubernetes clusters that is loaded with power-packed features such as high scalability, availability, no development caveat, less vendor locking, and much more.
- [PMM-6592](https://jira.percona.com/browse/PMM-6592): PMM now displays the ports used by the exporters in the output of the pmm- admin list and status commands, which are crucial while debugging.

- [PMM-7110](https://jira.percona.com/browse/PMM-7110): You can now use the pprof parameter in the pmm-admin summary command to obtain profiling data from the PMM server, thereby enabling you to generate reports in textual and graphical formats to visualize and analyze data.

- [PMM-7186](https://jira.percona.com/browse/PMM-7186):The pmm-admin summary command now retrieves a list of targets scrappedscraped by Victoriametrics on the client-side for an enhanced troubleshooting experience.

- [PMM-7925](https://jira.percona.com/browse/PMM-7925): Technical Preview: You can now deploy your PMM instances on Podman, which offers enhanced security and granularity.

- [PMM-8222](https://jira.percona.com/browse/PMM-8222): Enhanced documentation for DBaas API.

- [PMM-8308](https://jira.percona.com/browse/PMM-8308): To enhance the troubleshooting experience, in addition to the information summary and archive, you can now view the paths for all the exporters managed by the pmm-agent in the diagnostic data.

- [PMM-8660](https://jira.percona.com/browse/PMM-8660): Percona customers can now find the contact details of their dedicated Percona Support Specialist on the new Environment Overview tab on the main menu. 

- [PMM-9650](https://jira.percona.com/browse/PMM-9650): Updated the PXC experimental dashboard to make it simple and intuitive.

- [PMM-9704](https://jira.percona.com/browse/PMM-9704): With the implementation of a simplified API for DBaaS, you only have to specify the Kubernetes cluster name. All the other fields are optional, and the API will set the default values for these fields if not specified.

- [PMM-10039](https://jira.percona.com/browse/PMM-10039): VictoriaMetrics operator has been upgraded to 0.24.

- [PMM-10059](https://jira.percona.com/browse/PMM-10059): Use the new filters on the Advisors Checks > All Checks page to search advisors by Name, Description, Status or Interval. If you need to share the filtered results with your team members, send them the PMM URL which saves your search criteria and results. 

- [PMM-10083](https://jira.percona.com/browse/PMM-10083): Upgraded the ClickHouse plugin to 2.4.4 which fixes some of the CVEs.

- [PMM-10103](https://jira.percona.com/browse/PMM-10103): Added RHEL 9 support for PMM client.

- [PMM-10155](https://jira.percona.com/browse/PMM-10155): Access QAN from the main menu instead of the PMM dashboard for better reach and visibility.

- [PMM-2038](https://jira.percona.com/browse/PMM-2038): 
- [PMM-9913](https://jira.percona.com/browse/PMM-9913): PMM removes all the unnecessary temporary files created while adding a monitoring service, which might impact your PMM server's performance if not deleted.
- [PMM-10067](https://jira.percona.com/browse/PMM-10067): 

## Bugs Fixed

- [PMM-9292] - Integrated Alerting: Alert Rules: Add examples to the filters tooltip

- [PMM-10127](https://jira.percona.com/browse/PMM-10127): Alerting: Fixed issue where changing the page under Integrated Alerting > Alerts would not update the list of results.
 
- [PMM-10110](https://jira.percona.com/browse/PMM-10110): DBaas: Fixed an issue where an incorrect operator version was installed.

- [PMM-9965](https://jira.percona.com/browse/PMM-9965): DBaas: Fixed an issue where re-registering a K8s cluster returned an error.

- [PMM-7143](https://jira.percona.com/browse/PMM-7143): DBaaS: Fixed an issue where proper node metrics were not being exposed for database instances created with DBaaS.

- [PMM-8677](https://jira.percona.com/browse/PMM-8677): DBaaS: Fixed the names of the operators used in PMM on the DBaaS UI to reflect their official names rather than short forms.

- [PMM-9998](https://jira.percona.com/browse/PMM-9998): Fixed an issue where 'Unknown column...' errors are thrown when monitoring MariaDB from the Debian package (10.2, 10.3, 10.4, 10.5).

- [PMM-10144](https://jira.percona.com/browse/PMM-10144): Fixed an issue where if an already existing service was added via CLI, incorrect output was being displayed. 

- [PMM-9320](https://jira.percona.com/browse/PMM-9320): Fixed an issue where it was impossible to add MongoDB to PMM when the password contained “+.”

- [PMM-9909](https://jira.percona.com/browse/PMM-9909):  Fixed an issue where the redirection from Home Dashboard Stats Panel to Node Summary did not work.

- [PMM-10049](https://jira.percona.com/browse/PMM-10049): Removed unnecessary error messages from the pmm-agent log.

- [PMM-8819](https://jira.percona.com/browse/PMM-8819): Fixed an issue where the metric data displayed in the table was not appropriately aligned.

- [PMM-10087](https://jira.percona.com/browse/PMM-10087): PMM would show an “Internal server error” for the custom alert rule with a label created with "ia=1". This issue is now fixed.

- [PMM-7462](https://jira.percona.com/browse/PMM-7462): Fixed an issue where you can update the PMM settings via the UI if they are not provided as an Environment variable.

- [PMM-9510](https://jira.percona.com/browse/PMM-9292): Fixed incorrect and duplicate information displayed on the Dashboard for MongoDB Replica Set.

- [PMM-9908](https://jira.percona.com/browse/PMM-9908): Removed the information about the Grafana Enterprise license from the Server Admin page.
- [PMM-9910](https://jira.percona.com/browse/PMM-9910): Fixed an issue where upgrading PMM from 2.26.0 to 2.27.0 via the UI failed due to a GRPC error.
- [PMM-9981](https://jira.percona.com/browse/PMM-9981): Enormous space usage and slow queries for Group replication monitoring
- [PMM-10069](https://jira.percona.com/browse/PMM-10069): Fixed a typo in the tooltip for InnoDB Random Read Ahead.
- [PMM-10082](https://jira.percona.com/browse/PMM-10082): Fixed an issue where providing an invalid SSH key returned an irrelevant error message.
- [PMM-10161](https://jira.percona.com/browse/PMM-10161): Removed unnecessary breadcrumb navigation panel from all dashboards
- [PMM-10175](https://jira.percona.com/browse/PMM-10175): Fixed an issue where the PMM -agent logs were missing. 
- [PMM-10208](https://jira.percona.com/browse/PMM-10208): Fixed an issue with the pmm-admin add mysql command where on providing the username parameter, CLI ignored it and used the default root. 
- [PMM-10271](https://jira.percona.com/browse/PMM-10271): Fixed an issue where monitoring mongodb service failed while using "--enable-all-collectors or --disable-collectors=topstats" parameters.


## Known Issues

[PMM-9992](https://jira.percona.com/browse/PMM-9992): **Error while using reverse proxy (like Nginx)**

While using a reverse proxy (for example, Nginx) in front of PMM, you can run into the error `origin not allowed` after upgrading to PMM 2.27.0 or newer versions.

**Solution**

Add the Host header to the reverse proxy config file.

**Example** 

For Nginx, add the following:

`proxy_set_header Host $http_host;`