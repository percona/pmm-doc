# Percona Monitoring and Management 2.42

| **Release date** | May 30th, 2024                                                                                   |
| ----------------- | ----------------------------------------------------------------------------------------------- |
| **Installation** | [Installing Percona Monitoring and Management](https://www.percona.com/software/pmm/quickstart) |

Percona Monitoring and Management (PMM) is an open source database monitoring, management, and observability solution for MySQL, PostgreSQL, and MongoDB.

It enables you to observe the health of your database systems, explore new patterns in their behavior, troubleshoot them and execute database management operationsâ€”regardless of whether your databases are located on-premises or in the cloud.

## Release highlights

## Ubuntu 24.04 Noble support

PMM now officially supports monitoring of databases running on the recently released Ubuntu 24.04 Noble operating system.

With this addition, PMM continues to provide comprehensive coverage across a wide range of Linux distributions commonly used in database deployments. For more information, see [blogpost]().

## Configurable metrics resolutions per service

You can now configure metrics resolutions on a per-service basis by setting Low-Resolution (LR), Medium-Resolution (MR), and High-Resolution (HR) settings for each exporter individually.

Customizing the resolution settings for individual services means that you to fine-tune your PMM setup to balance data granularity and resource consumption.  This will enable you to:

- allocate resources efficiently by focusing on high-resolution data for key services
- reduce storage requirements by adjusting resolution for less critical components
- align your monitoring setup with the specific needs of your environment
  
This feature is currently accessible via the PMM API and will be integrated into the user interface in a future release.

## Configure maximum connections for PostgreSQL services

You can now configure the maximum number of connections that the PMM Agent's actions/jobs runner can open to the same PostgreSQL instance.

Previously available only through the CLI, this feature is now also accessible under:

- PostgreSQL service: **PMM Configuration > Add Service > PostgreSQL > Configuring PostgreSQL Service**
- RDS PostgreSQL service:  **PMM Configuration > Add Service > Amazon RDS > Discover with Amazon Credentials > RDS PostgreSQL**

Setting a maximum connection limit helps prevent excessive connections during concurrent operations, such as running multiple EXPLAIN or other operations required by Query Analytics (QAN) and Advisors, ensuring connections are closed promptly and avoiding idle connections.

When adjusting the maximum number of connections, keep in mind that higher values might be needed for larger or busier instances, but setting it too high can impact performance.

If no limit is specified or the option is disabled, the server will manage the connection limits automatically.

![!image](../_images/Max_Connection_Limit.png)

## Experimental PMM Self-monitoring dashboard
  
We've added a new experimental **PMM Health** dashboard to provide detailed insights into the health and performance of PMM itself.

The dashboard reflects the PMM architecture and covers key components such as overall component status, node health, Query Analytics, PMM-managed, Grafana, VictoriaMetrics, ClickHouse, and PostgreSQL metrics.

This initial version is available in the **Experimental** folder after updating PMM and contains a starter set of key metrics to help identify potential issues and ensure optimal operation.

For more information about this new dashboard, see the [Keeping an eye on the eye blog post]().

![!image](../_images/PMM_Health_dashboard.png)

## Experimental MongoDB dahboards: Sharded Cluster and Replica Set

Along with the PMM Health Dashboard, we're also introducing experimental updates to two key MongoDB dashboards: the **Cluster Summary** and **ReplicaSet** dashboards. These new versions, accessible from the MongoDB section within PMM, have been redesigned to address feedback regarding readability and data density.

The design and navigation are simplified here, to focus on the essential parameters and metrics most relevant to MongoDB performance monitoring.

We encourage you to explore these experimental dashboards and provide feedback in the PMM forum to help us refine them.

![!image](../_images/MongoDB_Cluster_Summary.png)

![!image](../_images/ReplSet_Dashboard_New.png) 

### Improvements

- [PMM-3303](https://perconadev.atlassian.net/browse/PMM-3303) - We've introduced an experimental PMM Health dashboard in the Experimental folder, offering detailed insights into PMM's health and performance by covering key components such as node health, Query Analytics, Grafana, VictoriaMetrics, ClickHouse, and PostgreSQL metrics.
- [PMM-13123](https://perconadev.atlassian.net/browse/PMM-13123) - Enhanced the **Query Response Time Distribution** graphs in the **MySQL Query Response Time Details** dashboard to provide more granular insights into query performance. Previously, the graphs did not include buckets for queries with response times less than 100 milliseconds, which is where many queries typically fall. This limitation made it difficult to analyze the performance of sub-100ms queries, especially those in the sub-1ms range.
- [PMM-13075](https://perconadev.atlassian.net/browse/PMM-13075) - Added support for Ubuntu 24.04 support.
- [PMM-12896](https://perconadev.atlassian.net/browse/PMM-PMM-12896), [PMM-12895](https://perconadev.atlassian.net/browse/PMM-12895), [PMM-12971](https://perconadev.atlassian.net/browse/PMM-12971) - Added per-database metrics collection and control of parameters, enabling more granular data gathering without overusing connections.
- [PMM-12994](https://perconadev.atlassian.net/browse/PMM-12994) - Added labels to the `pg_replication_slot_slot_is_active` and `slot_current_wal_lsn` metrics in the postgres_exporter to identify the replication type (logical or physical) and the plugin used for the slot.
- [PMM-12753](https://perconadev.atlassian.net/browse/PMM-12753) - Added experimental versions of the MongoDB Cluster Summary and ReplicaSet dashboards with a streamlined design and simplified navigation, focusing on essential metrics for monitoring MongoDB performance.
- [PMM-11583](https://perconadev.atlassian.net/browse/PMM-11583) - Added support for the `innodb_redo_log_capacity` variable introduced in MySQL 8.0, ensuring accurate and consistent data representation in the InnoDB Logging graphs.

### Fixed issues

- [PMM-12349](https://perconadev.atlassian.net/browse/PMM-12349) - Fixed an issue in the ReplicaSet Summary dashboard where incorrect data was displayed when a node in the replica set was down, ensuring that the dashboard accurately reflects the status and version information of the nodes even when they are unavailable.

- [PMM-12522](https://perconadev.atlassian.net/browse/PMM-12522) - Fixed a limitation in PMM Server that prevented it from monitoring more than 8 mongos instances in a large MongoDB cluster deployment.

- [PMM-12880](https://perconadev.atlassian.net/browse/PMM-12880) - Fixed an issue where the `pmm-admin --tls-skip-verify` flag did not work correctly when using x509 authentication for MySQL, ensuring that the flag now properly skips certificate verification when connecting to MySQL instances with self-signed or untrusted certificates.

- [PMM-12962](https://perconadev.atlassian.net/browse/PMM-12962) -  Updated the balancer metrics in MongoDB exporter to accurately calculate and report the `mongodb_mongos_sharding_balancer_enabled` metric, providing a correct indication of whether the balancer is currently enabled or disabled in the sharded cluster.

- [PMM-12989](https://perconadev.atlassian.net/browse/PMM-12989) - Fixed an issue where incorrect log entries persisted when monitoring Arbiter nodes in a MongoDB replica set.

- [PMM-12998](https://perconadev.atlassian.net/browse/PMM-12998) - Fixed an issue where upgrading PMM Server from versions older than 2.41.0 using Amazon Machine Image (AMI) or Open Virtualization Format (OVF) was unstable, causing the upgrade process to fail.

- [PMM-11278](https://perconadev.atlassian.net/browse/PMM-11278) - Improved the Query Analytics documentation to explain how QAN collects data. For more information, see the **Query Analytics under the hood** section in the [Query Analytics topic](../../docs/get-started/query-analytics.md).
  
- [PMM-9403](https://perconadev.atlassian.net/browse/PMM-9403) - Fixed an issue where the MongoDB Replication Lag graph displayed incorrect and identical values for all nodes, by updating the metric to differentiate between instances and accurately represent the replication lag of each node in the cluster.
