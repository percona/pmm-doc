# Percona Monitoring and Management 2.31.0

| **Release date:** | Sep 26, 2022                                                                                    |
| ----------------- | ----------------------------------------------------------------------------------------------- |
| **Installation:** | [Installing Percona Monitoring and Management](https://www.percona.com/software/pmm/quickstart) |

Percona Monitoring and Management (PMM) is an open source database monitoring, management, and observability solution for MySQL, PostgreSQL, and MongoDB.

!!! caution alert alert-warning "Important"
    We recommend using the latest version of PMM. This ensures that you have access to the latest PMM features and that your environment runs on the latest version of the underlying components, such as VictoriaMetrics, with all the bug fixes in place.

## Release Highlights


#### Grafana 9.1 in PMM 2.31.0

We have upgraded Grafana to version 9.1 in PMM 2.31.0. With this upgrade, you can get a simplified user interface, enhanced visualizations, and a default Alerting experience. For more information, see Whatâ€™s new in Grafana.
 
The following features have been introduced with the upgrade to Grafana to 9.1:
 
- **Expandable navbar (main menu)**
 
    For an enhanced user experience and better accessibility, the main menu has been expanded with crucial elements such as starred dashboards, system, MongoDB, MySQL, PostgreSQL, ProxySQL, and HAProxy.
 
- **Prometheus Query Builder**

    A new UI query builder has been introduced, by which you can write Prometheus queries effortlessly. Prometheus queries can be complex to grasp, but with this Grafana release in PMM, it becomes easier. 

- **Improvements to dashboard search**
    
    The dashboards can now be searched by panel title as well as dashboard title. Also, the overall performance has been enhanced as querying and sorting have become much faster.

- **Default unified alerting**

    Grafana Alerting is now on by default.

## Vacuum monitoring dashboard

!!! caution alert alert-warning "Important"
    These experimental dashboards are subject to change. It is recommended to use these dashboards for testing purposes only.


A new experimental dashboard has been intorued to overcome the difficulties related to vacuum by providing them with the right and timely insights.

## Podman GA

We are excited to announce the General Availability (GA) of Podman support for Deploying PMM 2.31.0. We had introduced it in 2.29.0 as a preview feature, but now we are production ready with this feature.


## New Alerting

Percona Alerting is a solution based on Grafana Alerting with the addition of simplicity of Templates usage.  
This will enable users to use Alerting without deep knowledge of metrics details and consume the best knowledge from Percona Experts who created Alerting Templates. 



### Database as a Service (DBaaS)

In our constant endeavor and focus on an enhanced user experience, in PMM 2.31.0, we have simplified the deployment and configuration of DBaaS as follows:

- With PMM 2.31.0, you can easily add a DB cluster from the newly created K8s cluster. All the DB cluster window fields are auto-populated with the values based on the existing K8s cluster. 

- For PMM 2.31.0, while accessing DbaaS, if you have an existing Kubernetes cluster configured for DBaaS, you will be automatically redirected to the DB Cluster page. Otherwise, you would be redirected to the Kubernetes Cluster page.

- We have added support for the latest (?) released Percona Operator for MongoDB (link to operator releases).



### Operators support

PMM now supports Percona Operators MySQL (1.11) and MongoDB (1.11).

PMM now supports Percona XtraDB Cluster (PXC) 1.11.0.



## New Features

- [PMM-10089](https://jira.percona.com/browse/PMM-10089): Grafana has been upgraded to 9.1.

- [PMM-10092](https://jira.percona.com/browse/PMM-10092): We have expanded and improved the main menu for PMM 2.31.0 based on Grafana 9.1. The main menu contains crucial elements, one of them being starred dashboards. 

- [PMM-10467](https://jira.percona.com/browse/PMM-10467):  You can add a free K8s cluster via Percona Platform Portal and use it for testing DBaaS in PMM. Read more in the [Private DBaaS with Free Kubernetes Cluster blogpost](https://www.percona.com/blog/private-dbaas-with-free-kubernetes-cluster/).

- [PMM-10443](https://jira.percona.com/browse/PMM-10443): 

- [PMM-10244](https://jira.percona.com/browse/PMM-10244): 


 
## Improvements

- [PMM-10560](https://jira.percona.com/browse/PMM-10340): We have improved the MongoDB Collection Details Dashboard. The Collection Activity panel is now collapsed by default, and the graphs are visible only when the`--enable-all-collectors` parameter is passed in pmm-admin command.

  
- [PMM-10330](https://jira.percona.com/browse/PMM-10330): Simpler DBaaS and Percona Platform connection configuration by suggesting the public address of the PMM server.

- [PMM-10495](https://jira.percona.com/browse/PMM-10495): Avoid swagger validation when browsing /swagger.


- [PMM-10076](https://jira.percona.com/browse/PMM-10076): For an improved UI experience, we have enforced the enter button for the date picker, which performs the same action as clicking `apply time range`.

- [PMM-7806](https://jira.percona.com/browse/PMM-7806): Logs: Added a more pronounced error message for the PMM agent to help you distinguish between potential problems, such as connectivity issues, unconfigured agent issues, connection time-out issues, etc.


- [PMM-10150](https://jira.percona.com/browse/PMM-10150): 


  
- [PMM-10018](https://jira.percona.com/browse/PMM-10018): Lowered the default values of CPU and memory for haproxy while deploying a DBaaS [Percona XtraDB Cluster](https://www.percona.com/software/mysql-database/percona-xtradb-cluster) (PXC) cluster to avoid wasting resources.


    
- [PMM-9118](https://jira.percona.com/browse/PMM-9118): Refined the error message thrown when a secure connection cannot be established while adding a monitoring database to PMM, thus making it much more contextual and easy to troubleshoot.


- [PMM-10516](https://jira.percona.com/browse/PMM-10516): 

- [PMM-10095](https://jira.percona.com/browse/PMM-10095): 

- [PMM-9989](https://jira.percona.com/browse/PMM-9989): PMM now supports Percona Operator for MongoDB 1.12.0.



## Bugs Fixed

- [PMM-10628](https://jira.percona.com/browse/PMM-10628): While adding MongoDB or PostgreSQL database via socket, PMM was throwing an error. This has been fixed in PMM 2.31.0.


- [PMM-10624](https://jira.percona.com/browse/PMM-10624): Empty dataname label after PostgreSQL upgrade in PMM.

- [PMM-10608](https://jira.percona.com/browse/PMM-10608): Fixed issues pertaining to the new Home Dashboard, such as high CPU panel unreadable for a higher number of nodes (more than ten nodes), filtering for the environment as well as node name not working correctly, time range not working as expected, some panels on the dashboard not displaying data for selected filters, and so on.

- [PMM-10587](https://jira.percona.com/browse/PMM-10587): Fixed an issue where the Confirm action modal is stuck until the cluster is registered.

- [PMM-10513](https://jira.percona.com/browse/PMM-10513): Fixed an issue where pmm-admin summary stored PMM password in client/status.json, thus posing a security risk.

- [PMM-10065](https://jira.percona.com/browse/PMM-10065): Fixed an issue encountered while monitoring a large number of nodes (1000) and services. Here, the changing scrape frequency led to data not being captured on the dashboard and throwing a templating error.

- [PMM-10064](https://jira.percona.com/browse/PMM-10064):

- [PMM-9973](https://jira.percona.com/browse/PMM-9973): Fixed an issue where the CPU utilization for Postgres Exporter was on the higher side.

- [PMM-9891 ()]https://jira.percona.com/browse/PMM-9891): Fixed an issue where QAN truncated long queries.

- [PMM-9556](https://jira.percona.com/browse/PMM-9556): Fixed an issue where creating a database cluster for MongoDB 5.0x was failing in DBaaS.

- [PMM-10044](https://jira.percona.com/browse/PMM-10044): Fixed an issue where QAN displayed enormously high values.

- [PMM-10213](https://jira.percona.com/browse/PMM-10213): Fixed an issue where adding MySQL with the defaults-file parameter failed.

- [PMM-10231](https://jira.percona.com/browse/PMM-10231): Fixed an issue for MySQL, where the --credential-source parameter ignored the username present in the json file.

- [PMM-10218](https://jira.percona.com/browse/PMM-10218): 

