.. _2.2.0:

===========================================
Percona Monitoring and Management 2.2.0
===========================================

:Date: December 9, 2019

*PMM* (`Percona Monitoring and Management <https://www.percona.com/doc/2.x/percona-monitoring-and-management/index.html>`_) is a free and open-source platform for managing and monitoring |MySQL|, |MongoDB|, and |postgresql| performance. You can run *PMM* in your own environment for maximum security and reliability. It provides thorough time-based analysis for |MySQL|, |MongoDB|, and |postgresql| servers to ensure that your data works as efficiently as possible.

For install instructions, see :ref:`deploy-pmm`.

.. note:: PMM 2 is designed to be used as a new installation â€” your existing
   PMM 1 environment can't be upgraded to this version.

Improvements and new features
=============================

* :pmmbug:`4575`: The new PMM Settings dashboard allows to configure various PMM
  Server options: setting metrics resolution and data retention, enabling or
  disabling send usage data statistics back to Percona and checking for updates;
  this dashboard is now the proper place to upload your public key for the SSH
  login and to download PMM Server logs for diagnostics
* :pmmbug:`4907` and :pmmbug:`4767`: The user's AMI Instance ID is now used
  to setup running PMM Server using AWS Marketplace as an additional
  verification on the user, based on the Amazon Marketplace rules
* :pmmbug:`4950` and :pmmbug:`3094`: Alternative `AWS partitions <https://docs.aws.amazon.com/sdk-for-go/api/aws/endpoints/#pkg-constants>`_  are now supported when adding an AWS RDS MySQL or Aurora MySQL Instance to PMM
* :pmmbug:`4976`: Home dashboard clean-up: "Systems under monitoring" and 
  "Network IO" singlestats were refined to be based on the ``host`` variable and
  to avoid using color as an indicator respectfully; "All" row elements were
  relinked to a "Nodes Overview" dashboard with regards to a selected host.
* :pmmbug:`4800`: The ``pmm-admin add mysql`` command have undergone help and
  messages improvements related to the table statistics collection
* :pmmbug:`4969`: Update Grafana to version 6.5.1
* :pmmbug:`5068`: Add drill-down links to the Node Summary dashboard graphs
* :pmmbug:`5053`: A tooltip was added to the Head Block graph on the Prometheus
  dashboard
* :pmmbug:`5050`: Add drill-down links to the graphs on all Services Compare
  dashboards
* :pmmbug:`5037`: Add drill-down links to all graphs on the Services Overview
  dashboards
* :pmmbug:`4988`: Filtering in Query Analytics have undergone improvements to
  make group selection more comfortable: Labels unavailable under the current 
  selection are shown as gray/disabled, and the percentage values are
  dynamically recalculated to reflect labels available within the currently
  applied filters.
* :pmmbug:`4966`: All passwords are now substituted with asterisk signs in the
  exporter logs for security reasons when not in debug mode
* :pmmbug:`527`: ``node_exporter`` is now providing the hardware monitoring
  information such as CPU temperatures and fan statuses; being collected by PMM
  Server it is not yet shown until a dedicated dashboard will appear in
  subsequent releases

Fixed bugs
==========

* :pmmbug:`4978`: Change the Top MySQL Questions singlestat on the MySQL
  Instances Overview dashboard to show ops instead of percentage

* :pmmbug:`4917`: the "Systems under monitoring" and "Monitored DB Instances" 
  singlestats on the Home dashboard now have a sparkline to make situation more
  clear with recently shut down nodes/instances

* :pmmbug:`4979`: Set decimal precision ``2`` for all the elements, including
  charts and singlestats, on all dashboards

* :pmmbug:`4980`: Fix "Load Average" singlestat on the Node Summary dashboard to
  show decimal value instead of percent

* :pmmbug:`4981`: Disable automatic color gradient in filled graphs on all
  dashboards

* :pmmbug:`4941`: Some charts were incorrectly showing empty fragments with high
  time resolution turned on

* :pmmbug:`5022`: Fix outdated drill-down links on the Prometheus Exporters
  Overview and Nodes Overview dashboards

* :pmmbug:`5023`: Make the All instances uptime singlestat on the Home dashboard
  to show Min values instead of Avg

* :pmmbug:`5029`: Option to upload dashboard snapshot to Percona disappeared
  after upgrade

* :pmmbug:`4946`: rename singlestats on the Home dashboard for better clearance:
   "Systems under monitoring" to "Nodes under monitoring" and "Monitored DB
   Instances" to "Monitored DB Services", and make the last one to count remote
   DB instances also

* :pmmbug:`5015`: Fix format of Disk Page Buffers singlestat on the Compare
  dashboard for PostgreSQL to have two digits precision for the consistency with
  other singlestats

* :pmmbug:`5014`: LVM logical volumes were wrongly sized on a new AWS
  deployment, resulting in "no space left on device" errors.

* :pmmbug:`4804`: Incorrect parameters validation required both ``service-name``
  and ``service-id`` parameters of the ``pmm-admin remove`` command to be
  presented, while the command itself demanded only one of them to identify the
  service.

* :pmmbug:`3298`: Panic errors were present in the ``rds_exporter`` log after
  adding an RDS instance from the second AWS account

* :pmmbug:`5089`: The serialize-javascript package was updated to version 2.1.1
  because of the possibility of regular expressions cross-site scripting
  vulnerability in it (CVE-2019-16769). Please note PMM versions were not
  affected by this vulnerability, as serialize-javascript package is used as a
  build dependency only.

.. include:: .res/replace.txt

